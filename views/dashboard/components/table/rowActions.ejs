<% 
/* 
rowActions.ejs 
Params: 
  model: string (e.g. "products") 
  row: current row data 
*/ 
%>

<div class="dropdown dropdown-end">
  <div
    class="btn btn-ghost p-0 min-h-0 h-auto"
    tabindex="0"
    role="button"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="24"
      height="24"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
      class="lucide lucide-ellipsis"
    >
      <circle
        cx="12"
        cy="12"
        r="1"
      />
      <circle
        cx="19"
        cy="12"
        r="1"
      />
      <circle
        cx="5"
        cy="12"
        r="1"
      />
    </svg>
  </div>
  <ul
    tabindex="0"
    class="menu dropdown-content bg-base-200 rounded-box z-1 w-32 p-2 shadow-sm"
  >
    <li>
      <a
        href="/dashboard/<%= model %>/<%= row.id %>/edit"
        class="flex gap-2"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="14"
          height="14"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="lucide lucide-pencil-icon lucide-pencil"
        >
          <path
            d="M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"
          />
          <path d="m15 5 4 4" />
        </svg>
        Edit
      </a>
    </li>
    <li>
      <a
        href="/dashboard/<%= model %>/<%= row.id %>"
        class="flex gap-2"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="14"
          height="14"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="lucide lucide-info-icon lucide-info"
        >
          <circle
            cx="12"
            cy="12"
            r="10"
          />
          <path d="M12 16v-4" />
          <path d="M12 8h.01" />
        </svg>
        Detail
      </a>
    </li>
    <li>
      <button
        class="flex gap-2 text-error"
        onclick="document.getElementById('deleteModal-<%= row.id %>').showModal()"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="14"
          height="14"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="lucide lucide-trash-icon lucide-trash"
        >
          <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6" />
          <path d="M3 6h18" />
          <path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" />
        </svg>
        Delete
      </button>
    </li>
  </ul>
</div>

<dialog
  id="deleteModal-<%= row.id %>"
  class="modal"
>
  <div class="modal-box">
    <h3 class="font-bold text-lg">Delete <%= model %></h3>
    <p class="py-4">
      Are you sure you want to delete
      <span class="font-semibold"
        ><%= row.name || row.title || 'this item' %></span
      >? This action cannot be undone.
    </p>
    <div class="modal-action">
      <form method="dialog"><button class="btn">Cancel</button></form>
      <form
        action="/dashboard/<%= model %>/<%= row.id %>?_method=DELETE"
        method="POST"
      >
        <button
          type="submit"
          class="btn btn-error"
        >
          Delete
        </button>
      </form>
    </div>
  </div>
</dialog>
