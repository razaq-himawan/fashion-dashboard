<% layout("layouts/dashboard") %>

<div class="space-y-10">
  <div class="space-y-1 flex">
    <div>
      <h1 class="text-4xl font-bold">Orders</h1>
      <p class="text-base-content/75">Manage all orders</p>
    </div>
    <div class="ml-auto">
      <a
        href="/dashboard/sizes/new"
        class="flex items-center btn btn-primary"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="16"
          height="16"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="lucide lucide-plus-icon lucide-plus"
        >
          <path d="M5 12h14" />
          <path d="M12 5v14" />
        </svg>
        <span>Create new</span>
      </a>
    </div>
  </div>

  <div class="space-y-4">
    <%- include('./components/table/dataTable', {
      model: 'orders',
      query: query,
      sort: sort,
      columns: [
        { field: 'id', label: 'ID', sortable: true },
        { 
          field: 'username',
          label: 'User',
          sortable: false,
          format: (value) => capitalize(value)
        },
        { field: 'email', label: 'Email', sortable: false },
        { field: 'status', label: 'Status', sortable: false },
        { field: 'item_count', label: 'Items', sortable: true },
        { 
          field: 'total_amount', 
          label: 'Total', 
          sortable: true,
          format: (value) => formatRupiah(value)
        },
      ],
      rows: orders
    }) %>
  </div>
</div>
